#!/usr/bin/make -f

# gdb-9 cannot be built by gcc-11 with -Werror=format-security
DEB_BUILD_MAINT_OPTIONS= hardening=-format
DPKG_EXPORT_BUILDFLAGS = 1
include /usr/share/dpkg/buildflags.mk

%:
	dh $@

# use the toolchain tarballs that have been pre-downloaded in ./debian
override_dh_auto_build:
	dh_auto_build -- prefix=/usr libexecdir=/usr/lib LOCAL_PACKAGE_DIR=$$PWD/debian/toolchain

# we run MAKE directly because dh_auto_install runs make in dry-run to
# check for the build system, and this breaks gcc generated includes
override_dh_auto_install:
	$(MAKE) install -- prefix=/usr libexecdir=/usr/lib DESTDIR=$$PWD/debian/ngdevkit-toolchain

# Do not strip the m68k libraries with standard strip as this corrupts
# the archives (e.g. libgcc.a)
override_dh_strip:
	true
